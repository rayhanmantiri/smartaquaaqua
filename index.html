<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Iot - Smart Aquarium</title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="./assets/images/favicon.ico" />

  <!-- Library / Plugin Css Build -->
  <link rel="stylesheet" href="./assets/css/core/libs.min.css" />

  <!-- Hope Ui Design System Css -->
  <link rel="stylesheet" href="./assets/css/hope-ui.min.css?v=4.0.0" />

  <!-- Custom Css -->
  <link rel="stylesheet" href="./assets/css/custom.min.css?v=4.0.0" />

  <!-- Dark Css -->
  <link rel="stylesheet" href="./assets/css/dark.min.css" />

  <!-- Customizer Css -->
  <link rel="stylesheet" href="./assets/css/customizer.min.css" />

  <!-- RTL Css -->
  <link rel="stylesheet" href="./assets/css/rtl.min.css" />
</head>

<body class="boxed-fancy">
  <div class="boxed-inner">
    <!-- loader Start -->
    <div id="loading">
      <div class="loader simple-loader">
        <div class="loader-body"></div>
      </div>
    </div>
    <!-- loader END -->
    <span class="screen-darken"></span>
    <main class="main-content">
      <!--Nav Start-->
      <nav class="nav navbar navbar-expand-lg navbar-light iq-navbar">
        <div class="container-fluid navbar-inner">
          <button data-trigger="navbar_main" class="d-lg-none btn btn-primary rounded-pill p-1 pt-0" type="button">
            <svg class="icon-20" width="20px" viewBox="0 0 24 24">
              <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z">
              </path>
            </svg>
          </button>
          <a href="./dashboard/index.html" class="navbar-brand">
            <!--Logo start-->
            <svg class="icon-30 text-primary" width="30" class="text-primary" viewBox="0 0 30 30" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <rect x="-0.757324" y="19.2427" width="28" height="4" rx="2" transform="rotate(-45 -0.757324 19.2427)"
                fill="currentColor"></rect>
              <rect x="7.72803" y="27.728" width="28" height="4" rx="2" transform="rotate(-45 7.72803 27.728)"
                fill="currentColor"></rect>
              <rect x="10.5366" y="16.3945" width="16" height="4" rx="2" transform="rotate(45 10.5366 16.3945)"
                fill="currentColor"></rect>
              <rect x="10.5562" y="-0.556152" width="28" height="4" rx="2" transform="rotate(45 10.5562 -0.556152)"
                fill="currentColor"></rect>
            </svg>
            <!--logo End-->
            <h4 class="logo-title">IOT- Smart Aquairum</h4>
          </a>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item dropdown">
                <a class="nav-link py-0 d-flex align-items-center" href="#" id="navbarDropdown" role="button"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  <img src="./assets/images/avatars/01.png" alt="User-Profile"
                    class="theme-color-default-img img-fluid avatar avatar-50 avatar-rounded" />
                  <img src="./assets/images/avatars/avtar_1.png" alt="User-Profile"
                    class="theme-color-purple-img img-fluid avatar avatar-50 avatar-rounded" />
                  <img src="./assets/images/avatars/avtar_2.png" alt="User-Profile"
                    class="theme-color-blue-img img-fluid avatar avatar-50 avatar-rounded" />
                  <img src="./assets/images/avatars/avtar_4.png" alt="User-Profile"
                    class="theme-color-green-img img-fluid avatar avatar-50 avatar-rounded" />
                  <img src="./assets/images/avatars/avtar_5.png" alt="User-Profile"
                    class="theme-color-yellow-img img-fluid avatar avatar-50 avatar-rounded" />
                  <img src="./assets/images/avatars/avtar_3.png" alt="User-Profile"
                    class="theme-color-pink-img img-fluid avatar avatar-50 avatar-rounded" />
                  <div class="caption ms-3 d-none d-md-block">
                    <h6 class="mb-0 caption-title">M Raihan</h6>
                    <p class="mb-0 caption-sub-title">Student</p>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!--Nav End-->
      <div class="conatiner-fluid content-inner pb-0">
        <div class="row">
          <div class="col-md-12 col-lg-12">
            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                      <div class="bg-soft-success rounded p-3">
                        <svg class="icon-32" width="32" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg">
                          <path opacity="0.4"
                            d="M10.0833 15.958H3.50777C2.67555 15.958 2 16.6217 2 17.4393C2 18.2559 2.67555 18.9207 3.50777 18.9207H10.0833C10.9155 18.9207 11.5911 18.2559 11.5911 17.4393C11.5911 16.6217 10.9155 15.958 10.0833 15.958Z"
                            fill="currentColor"></path>
                          <path opacity="0.4"
                            d="M22.0001 6.37867C22.0001 5.56214 21.3246 4.89844 20.4934 4.89844H13.9179C13.0857 4.89844 12.4102 5.56214 12.4102 6.37867C12.4102 7.1963 13.0857 7.86 13.9179 7.86H20.4934C21.3246 7.86 22.0001 7.1963 22.0001 6.37867Z"
                            fill="currentColor"></path>
                          <path
                            d="M8.87774 6.37856C8.87774 8.24523 7.33886 9.75821 5.43887 9.75821C3.53999 9.75821 2 8.24523 2 6.37856C2 4.51298 3.53999 3 5.43887 3C7.33886 3 8.87774 4.51298 8.87774 6.37856Z"
                            fill="currentColor"></path>
                          <path
                            d="M21.9998 17.3992C21.9998 19.2648 20.4609 20.7777 18.5609 20.7777C16.6621 20.7777 15.1221 19.2648 15.1221 17.3992C15.1221 15.5325 16.6621 14.0195 18.5609 14.0195C20.4609 14.0195 21.9998 15.5325 21.9998 17.3992Z"
                            fill="currentColor"></path>
                        </svg>
                      </div>
                      <div>
                        <p class="mb-2">Pemanas Air</p>
                        <div class="form-group">
                          <div class="form-check form-switch">
                            <input style="width: 50px; height: 30px" class="form-check-input" type="checkbox"
                              id="pemanas-air" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                      <div class="bg-soft-success rounded p-3">
                        <svg class="icon-32" width="32" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg">
                          <path opacity="0.4"
                            d="M10.0833 15.958H3.50777C2.67555 15.958 2 16.6217 2 17.4393C2 18.2559 2.67555 18.9207 3.50777 18.9207H10.0833C10.9155 18.9207 11.5911 18.2559 11.5911 17.4393C11.5911 16.6217 10.9155 15.958 10.0833 15.958Z"
                            fill="currentColor"></path>
                          <path opacity="0.4"
                            d="M22.0001 6.37867C22.0001 5.56214 21.3246 4.89844 20.4934 4.89844H13.9179C13.0857 4.89844 12.4102 5.56214 12.4102 6.37867C12.4102 7.1963 13.0857 7.86 13.9179 7.86H20.4934C21.3246 7.86 22.0001 7.1963 22.0001 6.37867Z"
                            fill="currentColor"></path>
                          <path
                            d="M8.87774 6.37856C8.87774 8.24523 7.33886 9.75821 5.43887 9.75821C3.53999 9.75821 2 8.24523 2 6.37856C2 4.51298 3.53999 3 5.43887 3C7.33886 3 8.87774 4.51298 8.87774 6.37856Z"
                            fill="currentColor"></path>
                          <path
                            d="M21.9998 17.3992C21.9998 19.2648 20.4609 20.7777 18.5609 20.7777C16.6621 20.7777 15.1221 19.2648 15.1221 17.3992C15.1221 15.5325 16.6621 14.0195 18.5609 14.0195C20.4609 14.0195 21.9998 15.5325 21.9998 17.3992Z"
                            fill="currentColor"></path>
                        </svg>
                      </div>
                      <div>
                        <p class="mb-2">Pemberi Makan</p>
                        <div class="form-group">
                          <div class="form-check form-switch">
                            <input style="width: 50px; height: 30px" class="form-check-input" type="checkbox"
                              id="pemberi-makan" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 col-lg-6">
            <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header d-flex justify-content-between flex-wrap">
                    <div class="header-title">
                      <h5 class="card-title">Kekeruhan Air</h5>
                    </div>
                  </div>
                  <div class="card-body">
                    <div id="kekeruhanChart"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 col-lg-6">
            <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header d-flex justify-content-between flex-wrap">
                    <div class="header-title">
                      <h5 class="card-title">Suhu</h5>
                    </div>
                  </div>
                  <div class="card-body">
                    <div id="suhuChart"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer Section Start -->
      <footer class="footer">
        <div class="footer-body">
          <div class="right-panel">
            ©
            <script>
              document.write(new Date().getFullYear());
            </script>
            IOT Smart Aquarium
          </div>
        </div>
      </footer>
      <!-- Footer Section End -->
    </main>
    <!-- Wrapper End-->
  </div>

  <script src="./assets/js/core/libs.min.js"></script>

  <!-- External Library Bundle Script -->
  <script src="./assets/js/core/external.min.js"></script>

  <!-- Widgetchart Script -->
  <script src="./assets/js/charts/widgetcharts.js"></script>

  <!-- mapchart Script -->
  <script src="./assets/js/charts/vectore-chart.js"></script>
  <script src="./assets/js/charts/dashboard.js"></script>

  <!-- fslightbox Script -->
  <script src="./assets/js/plugins/fslightbox.js"></script>

  <!-- Settings Script -->
  <script src="./assets/js/plugins/setting.js"></script>

  <!-- Slider-tab Script -->
  <script src="./assets/js/plugins/slider-tabs.js"></script>

  <!-- Form Wizard Script -->
  <script src="./assets/js/plugins/form-wizard.js"></script>

  <!-- AOS Animation Plugin-->

  <!-- App Script -->
  <script src="./assets/js/hope-ui.js" defer></script>

  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <script src="./assets/js/jquery-3.7.0.js"></script>
  <script>
    $(document).ready(function () {
      let suhuChart = null;
      let kekeruhanChart = null;
      
      // Panggil fungsi fetchData setiap 2 detik
      setInterval(fetchData, 2000); // 2000 ms = 2 detik
      
      let pemberiMakan;
      let pemanasAir;
      let suhu = null;
      let kekeruhan = null;
      
      function fetchData() {
        $.ajax({
          url: "https://sgp1.blynk.cloud/external/api/get?token=SjAIj52AVrjOQm692qYvHoXqNoGZ1Hyj&v0&v1&v2&v3",
          success: function (result) {
            pemberiMakan = result.v2 == 1;
            pemanasAir = result.v3 == 1;
            suhu = result.v0;
            kekeruhan = result.v1;
            
            $("#pemberi-makan").prop("checked", pemberiMakan);
            $("#pemanas-air").prop("checked", pemanasAir);
            
            if (suhuChart) {
              suhuChart.destroy(); // Hancurkan chart jika sudah ada
            }
            createSuhuChart();
            
            if (kekeruhanChart) {
              kekeruhanChart.destroy(); // Hancurkan chart jika sudah ada
            }
            createKekeruhanChart();
          },
        });
      }
  
      function createSuhuChart() {
        const suhuOptions = {
          chart: {
            type: "line", // Tipe grafik
          },
          series: [
            {
              name: "Suhu Air", // Nama dataset
              data: [suhu], // Data suhu
            },
          ],
          xaxis: {
            categories: ["Waktu"], // Label sumbu x
          },
        };
  
        suhuChart = new ApexCharts(document.querySelector("#suhuChart"), suhuOptions);
        suhuChart.render();
      }
  
      function createKekeruhanChart() {
        const kekeruhanOptions = {
          chart: {
            type: "line", // Tipe grafik
          },
          series: [
            {
              name: "Kekeruhan Air", // Nama dataset
              data: [kekeruhan], // Data suhu
            },
          ],
          xaxis: {
            categories: ["Waktu"], // Label sumbu x
          },
        };
  
        kekeruhanChart = new ApexCharts(document.querySelector("#kekeruhanChart"), kekeruhanOptions);
        kekeruhanChart.render();
      }
  
      $("#pemberi-makan").on("click", function (event) {
        let checked = event.target.checked ? 1 : 0;
        $.ajax({
          url: "https://sgp1.blynk.cloud/external/api/update?token=SjAIj52AVrjOQm692qYvHoXqNoGZ1Hyj&v2=" + checked,
          method: "get",
        });
      });
  
      $("#pemanas-air").on("click", function (event) {
        let checked = event.target.checked ? 1 : 0;
        $.ajax({
          url: "https://sgp1.blynk.cloud/external/api/update?token=SjAIj52AVrjOQm692qYvHoXqNoGZ1Hyj&v3=" + checked,
          method: "get",
        });
      });
    });
  </script>
  
</body>

</html>